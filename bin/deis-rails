#!/usr/bin/env ruby

require "thor"

class DeisRails < Thor
  desc "console -a APP", "run console on an app"
  method_option :app, aliases: ["a"], type: :string, required: true, desc: "Name of the app"
  def console
    require_relative "../lib/deis-interactive/rails/console"
    app = options[:app]
    DeisInteractive::Rails::Console.new(app).perform
  end

  desc "logs [-f] -a APP [-d PROCESS]", "logs on an app"
  method_option :app, aliases: ["a"], type: :string, required: true, desc: "Name of the app"
  def logs
    require_relative "../lib/deis-interactive/rails/log"
    app = options[:app]
    DeisRailsLog.new(app, process).perform
  end
end

DeisRails.start(ARGV)
